<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<title>SweetBiscuit44 Calculator — Fixed Layout</title>
<style>
  :root {
    --biscuit: #f9d8a6;
    --biscuit-dark: #e8c28d;
    --choco-chip: #5d4037;
    --warm-cream: #fdf5e6;
    --error: #e74c3c;
    --sound-on: #3498db;
    --sound-off: #95a5a6;
    --bg: #ffffff;
    --muted: #7a6a5f;
    --glass: rgba(255,255,255,0.6);
  }

  [data-theme="dark"] {
    --biscuit: #3e2e28;
    --biscuit-dark: #35221a;
    --choco-chip: #f6e9da;
    --warm-cream: #1b1a1a;
    --bg: #0f0f10;
    --muted: #bdb3a7;
    --glass: rgba(0,0,0,0.4);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  body,html { width:100%; height:100%; overflow-x:hidden; font-family: system-ui, sans-serif; }

  body {
    background: linear-gradient(180deg,var(--warm-cream),var(--bg));
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }

  /* FIX: prevent squashing by limiting width */
  .calculator {
    width: 100%;
    max-width: 460px;
    min-width: 300px;
    margin: auto;
    border-radius: 22px;
    background: var(--glass);
    backdrop-filter: blur(12px);
    box-shadow: 0 10px 40px rgba(0,0,0,0.18);
    overflow: hidden;
  }

  .display {
    background: linear-gradient(90deg, var(--biscuit), var(--biscuit-dark));
    padding: 22px;
    text-align:right;
    font-size:2rem;
    min-height:84px;
    display:flex;
    align-items:center;
    justify-content:flex-end;
  }

  .buttons {
    display:grid;
    grid-template-columns:repeat(4,1fr);
    padding:18px;
    gap:12px;
  }

  button {
    padding:16px;
    font-size:1.2rem;
    border:none;
    border-radius:12px;
    cursor:pointer;
    background: var(--biscuit);
    color:var(--choco-chip);
    transition:.15s;
  }

  button:hover { transform:translateY(-3px); }
  button:active { transform:translateY(1px) scale(.97); }

  .operator { background:#d7b89a; }
  .equals { background:#b8866b; color:white; }
  .clear { background:var(--error); color:white; }
  .reset { grid-column:span 4; background:#8e44ad; color:white; }

  .util-row { display:flex; gap:8px; padding:12px 18px; }

  .footer {
    padding:16px;
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:10px;
  }

  @media (max-width:430px){
    .calculator{ max-width:95vw; }
    button { font-size:1.05rem; padding:14px; }
    .display { font-size:1.7rem; padding:16px; }
  }
</style>
</head>
<body data-theme="light">

<div class="calculator">
  <div class="display" id="display">0</div>

  <div class="util-row">
    <button id="copy">Copy</button>
    <button id="paste">Paste</button>
    <button id="clear-storage">Clear Storage</button>
  </div>

  <div class="buttons" id="button-grid">
    <button class="clear">C</button>
    <button class="operator">⌫</button>
    <button class="operator">÷</button>
    <button class="operator">×</button>

    <button>7</button>
    <button>8</button>
    <button>9</button>
    <button class="operator">−</button>

    <button>4</button>
    <button>5</button>
    <button>6</button>
    <button class="operator">+</button>

    <button>1</button>
    <button>2</button>
    <button>3</button>
    <button class="equals">=</button>

    <button style="grid-column:span 2;">0</button>
    <button>.</button>
    <button class="operator">%</button>

    <button class="reset">Reset Calculator</button>
  </div>

  <div class="footer">
    <a href="https://paypal.me/sweetbiscuit44" target="_blank">Donate</a>
    <a href="mailto:sweetbiscuit44@gmail.com">Email</a>
    <a href="https://sweetbiscuit44-del.github.io/sweet-biscuit44-home-page/" target="_blank">SweetBiscuit Main</a>
  </div>
</div>

<script>
let currentInput = localStorage.getItem('sb_input') || '0';
const display = document.getElementById('display');

function update(){ display.textContent = currentInput; localStorage.setItem('sb_input', currentInput); }
update();

function append(v){
  if(v==='⌫') currentInput = currentInput.length>1 ? currentInput.slice(0,-1) : '0';
  else if(currentInput==='0' && v!=='.') currentInput=v;
  else currentInput+=v;
  update();
}

function calc(){ try{ currentInput = String(Function('return '+currentInput.replace('×','*').replace('÷','/').replace('−','-'))()); } catch{ currentInput='Error'; setTimeout(()=>{currentInput='0';update();},1200); }
update(); }

function clearAll(){ currentInput='0'; update(); }
function resetCalc(){ localStorage.removeItem('sb_input'); currentInput='0'; update(); }

document.getElementById('button-grid').addEventListener('click',e=>{
  if(e.target.tagName!=='BUTTON')return;
  const t=e.target.textContent;
  if(t==='C') clearAll();
  else if(t==='Reset Calculator') resetCalc();
  else if(t==='=') calc();
  else if(t==='⌫') append('⌫');
  else if(t==='÷') append('/');
  else if(t==='×') append('*');
  else if(t==='−') append('-');
  else append(t);
});
</script>

</body>
</html>
